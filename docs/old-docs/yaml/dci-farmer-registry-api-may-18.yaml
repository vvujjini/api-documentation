openapi: 3.0.3
info:
  title: Farmer registry APIs
  description: 'A Farmer registry API is an application programming interface that allows developers to access data from a farmer registry. A farmer registry is a database that contains information about farmers, including their contact information, location, farm size, crops grown, and other relevant details.
  
  The Farmer registry API provides a standardized way for developers to access data from a farmer registry, which can make it easier and faster to build applications that support farmers. '
  version: 0.0.1
servers:
  - description: Farmer registry access point
    url: https://localhost:8081/
tags:
  - name: Search API
    description: '' 
  - name: Eligibility determination API
    description: ''
  - name: Event subscription
    description: 'The event subscription APIs facilate to get notification when any event happens in farmer registry, The client application meed to register for each event seperately with provided client id and client secret'
  - name: Validation API 
    description: 'List of API that exibit validation capability'
paths:
  /search:
    post:
      tags:
        - Search API
      summary: To perform search operation in registry
      description: The Search operation perfromed for registry 
      parameters:
        - $ref: "#/components/parameters/version"
        - $ref: "#/components/parameters/x-hmac"
        - $ref: "#/components/parameters/authorization"
        - $ref: '#/components/parameters/x-registry-type'
        - $ref: '#/components/parameters/x-message-id'
        - $ref: '#/components/parameters/x-timestamp'
        - $ref: '#/components/parameters/x-sender-id'
        - $ref: '#/components/parameters/x-async'
        - $ref: '#/components/parameters/x-callbackendpoint'
      requestBody:
        description: Search request body
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchRequest'     
        required: true
      responses:
        '102':
          description: Processing 
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'          
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse'
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
      security:
        - spmis_auth:
            - read:search
  /on-search:
    post:
      tags:
        - Search API 
      summary: Search request call back, if callback URL empty then save response at server end respond with data when requested
      description: The requester will pass information submitted in search and if response prepared then it will send content
      parameters:
        - $ref: "#/components/parameters/version"
        - $ref: "#/components/parameters/authorization"
        - $ref: '#/components/parameters/x-registry-type'
        - $ref: '#/components/parameters/x-message-id'
        - $ref: '#/components/parameters/x-timestamp'
        - $ref: '#/components/parameters/x-sender-id'
      requestBody:
        description: Search request
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchRequest'     
        required: true
      responses:
        '102':
          description: Processing 
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'          
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse'
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
      security:
        - spmis_auth:
            - read:search
  /eligibility-determination:
    get:
      tags:
        - Eligibility determination API 
      summary: Get list of eligibility determination supported by registry
      description: ''
      operationId: ''
      parameters:
        - $ref: "#/components/parameters/version"
        - $ref: "#/components/parameters/x-hmac"
        - $ref: "#/components/parameters/authorization"
        - $ref: '#/components/parameters/x-registry-type'
        - $ref: '#/components/parameters/x-message-id'
        - $ref: '#/components/parameters/x-timestamp'
        - $ref: '#/components/parameters/x-sender-id'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema: 
                type: array
                example: '[
                          {
                            "eligibility_check_id": "string",
                            "eligibility_check_type": "POVERTY_SCORE",
                            "response_format": "json"
                          },{
                            "eligibility_check_id": "string",
                            "eligibility_check_type": "IS_FARMER",
                            "response_format": "json"
                          }
                        ]'
                items:
                  allOf:
                    - $ref: '#/components/schemas/IsFarmerEligibility'
                    - $ref: '#/components/schemas/PovertyScoreEligibility'
      security:
        - spmis_auth:
            - read:claims
    post:
      tags:
        - Eligibility determination API 
      summary: To get information of claim for person
      description: Response will contain claim details
      operationId: ''
      parameters:
        - $ref: "#/components/parameters/version"
        - $ref: "#/components/parameters/x-hmac"
        - $ref: "#/components/parameters/authorization"
        - $ref: '#/components/parameters/x-registry-type'
        - $ref: '#/components/parameters/x-message-id'
        - $ref: '#/components/parameters/x-timestamp'
        - $ref: '#/components/parameters/x-sender-id'
      requestBody:
        description: ''
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EligibilityDeterminationRequest'     
        required: true
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EligibilityDeterminationResponse'     
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse'
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse'                 
      security:
        - spmis_auth:
            - read:relationships
  /subscription-list:
    get:
      tags:
        - Event subscription 
      summary: Get list of supported events in registry
      parameters:
        - $ref: "#/components/parameters/version"
        - $ref: "#/components/parameters/x-hmac"
        - $ref: "#/components/parameters/authorization"
        - $ref: '#/components/parameters/x-registry-type'
        - $ref: '#/components/parameters/x-message-id'
        - $ref: '#/components/parameters/x-timestamp'
        - $ref: '#/components/parameters/x-sender-id'
        - $ref: '#/components/parameters/x-async'
        - $ref: '#/components/parameters/x-callbackendpoint'
      description: ''
      operationId: ''
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema: 
                type: array
                items:
                  $ref: '#/components/schemas/SupportedEvents'          
      security:
        - spmis_auth:
            - read:eligibity
  /subscribe:
    post:
      tags:
        - Event subscription  
      summary: To subscribe for specific event
      description: Response will contain eligibity details
      operationId: ''
      requestBody:
        description: ''
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscriptionRequest'     
        required: true
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionResponse'     
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse'
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse'                 
      security:
        - spmis_auth:
            - read:relationships
  /unsubscribe:
    post:
      tags:
        - Event subscription  
      summary: To un-subscribe for specific event
      description: Response will contain list of subscribed events
      operationId: ''
      requestBody:
        description: 'Request to un-subscribe'
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UnSubscribeRequest'     
        required: true
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionResponse'     
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse'
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse'                 
      security:
        - spmis_auth:
            - read:relationships
  /events:
    post:
      tags:
        - Event subscription  
      summary: The events will retrieve all events for specific subscription
      description: Response will contain eligibity details
      operationId: ''
      requestBody:
        description: ''
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EventsRequest'     
        required: true
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EventsResponse'     
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse'
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse'                 
      security:
        - spmis_auth:
            - read:relationships
  /validation:
    get:
      tags:
        - Validation API 
      summary: The validation API will validate perticular validation like IS_FARMER, IS_POOR, IS_SENIOR_CITIZEN etc flags
      description: ''
      operationId: ''
      parameters:
        - $ref: "#/components/parameters/version"
        - $ref: "#/components/parameters/x-hmac"
        - $ref: "#/components/parameters/authorization"
        - $ref: '#/components/parameters/x-registry-type'
        - $ref: '#/components/parameters/x-message-id'
        - $ref: '#/components/parameters/x-timestamp'
        - $ref: '#/components/parameters/x-sender-id'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema: 
                $ref: '#/components/schemas/ValidationCheckRequest'
      security:
        - spmis_auth:
            - read:claims
    post:
      tags:
        - Validation API  
      summary: To perform boolean operation to check certain data set for items like is IS_FARMER, IS_POOR, IS_SENIOR_CITIZEN 
      description: Response will contain claim details
      operationId: ''
      parameters:
        - $ref: "#/components/parameters/version"
        - $ref: "#/components/parameters/x-hmac"
        - $ref: "#/components/parameters/authorization"
        - $ref: '#/components/parameters/x-registry-type'
        - $ref: '#/components/parameters/x-message-id'
        - $ref: '#/components/parameters/x-timestamp'
        - $ref: '#/components/parameters/x-sender-id'
      requestBody:
        description: ''
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ValidationCheckRequest'     
        required: true
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationCheckResponse'     
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse'
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse' 
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpErrorResponse'                 
      security:
        - spmis_auth:
            - read:relationships
components:
  parameters:
    authorization:
      name: Authorization
      in: header
      required: true
      description: Access token which was issued after successful login with gateway auth server.
      schema:
        type: string
        example: Bearer <...>        
    version:
      in: header
      name: x-api-version
      schema:
        type: string
        example: "1.0.0"
      required: false
      description: If not provided use latest api version as default
    x-timestamp:
      in: header
      name: timestamp
      schema:
        type: string
        example: "2022-12-04T18:01:07+00:00"
      required: true
      description: Timestamp of request when it was sent , ideally it should be GMT
    x-hmac:
      in: header
      name: x-hmac
      schema:
        type: string
        example: "bd4a82cd319ababe57d0a822049ae8985029f82237509d3f091c82cbc7a6945c"
      required: true
      description: Signature created in combination of {x-message-id}+{x-timestamp:}+{x-sender-id}.This is usually encrypted string using HMAC-SHA-256 algorithm with the private key.
    x-registry-type:
      in: header
      name: x-registry-type
      schema:
        type: string
        enum: ['x-farmer']
      required: true
      description: This param used to decide which service to be called to retrieve data
    x-sender-id:
      in: header
      name: x-sender-id
      schema:
        type: string
        example: "Farmer help programme "
      required: true
      description: Information about requester , it may be some code of SP system
    x-message-id:
      in: header
      name: x-message-id
      schema:
        type: string
        format: uuid
        example: 0c96614c-7255-4774-b109-cd53ee859000
      required: true
      description: UUID string to be sent in request header for tracking of request
    x-async:
      in: header
      name: x-async
      schema:
        type: string
        example: true
      required: true
      description: Async param indicate that response to be sent immediate or in call back, if _true_ send data in response if _false_ just return HTTP status 202
    x-callbackendpoint:
      in: header
      name: x-callbackendpoint
      schema:
        type: string
        example: "https://senderhost/callback/on-disburse"
      required: false
      description: If async response requested then this param to be supplied for receiving data in SP system, this is usually endpoint active in SP env
  schemas:
    SearchRequest:
      type: object
      example: '{"transaction_id":"0c96614c-7255-4774-b109-cd53ee851769","additionalFields":["contact","address","dob"],"filtergroups":[{"groupid":"A","operator-with-next-group":"and","fields":[{"fieldname":"identifier.type","operator":"contains","value":"NATIONAL_ID","nextfieldoperator":"and"},{"fieldname":"identifier.value","operator":"contains","value":"345678912","nextfieldoperator":""}]},{"groupid":"B","operator-with-next-group":"","fields":[{"fieldname":"name.first_name","operator":"contains","value":"john","nextfieldoperator":"or"},{"fieldname":"name.last_name","operator":"contains","value":"doe","nextfieldoperator":""}]}],"sortby":[{"fieldname":"name.first_name","order":"asc"}],"pagination":{"page_size":10,"page_number":5}}'
      properties:
        transaction_id:
          type: string
          example: 0c96614c-7255-4774-b109-cd53ee851769
        filtergroups:
          type: array
          items:
            oneOf:
              - $ref: '#/components/schemas/FilterGroupFarmerRegistry'
              - $ref: '#/components/schemas/FilterGroupCRVSRegistry'
        sortby:
          $ref: '#/components/schemas/Sort'
        pagination:
          type: object
          properties:
            page_size:
              type: number
              example: 10
            page_number:
              type: number
              example: 5  
    FilterGroupFarmerRegistry:
      type: object
      properties:
        groupid:
          type: string
          format: string
          example: "A"
        operator-with-next-group:
          type: string
          description: 'Operation with next group' 
          enum: ["and", "or"]
        fields:
          type: array
          items:
            anyOf:
              - $ref: '#/components/schemas/IdentifierTypeField'
              - $ref: '#/components/schemas/IdentifierValueField'
              - $ref: '#/components/schemas/NameField'
              - $ref: '#/components/schemas/CropTypeField'
              - $ref: '#/components/schemas/RegionField'
              - $ref: '#/components/schemas/FarmerTypeField'
    FilterGroupCRVSRegistry:
      type: object
      properties:
        groupid:
          type: string
          format: string
          example: "A"
        operator-with-next-group:
          type: string
          description: 'Operation with next group' 
          enum: ["and", "or"]
        fields:
          type: array
          items:
            anyOf:
              - $ref: '#/components/schemas/IdentifierTypeField'
              - $ref: '#/components/schemas/IdentifierValueField'
              - $ref: '#/components/schemas/RegionField'
              - $ref: '#/components/schemas/Repositories'
    Field:
      type: object
      required:
        - operator
        - nextfieldoperator
      properties: 
        operator:
          $ref: '#/components/schemas/FieldOperator'
        nextfieldoperator: 
          $ref: '#/components/schemas/GroupOperator'
    IdentifierTypeField:
      description: 'Search with identifier type'
      allOf: 
        - $ref: '#/components/schemas/Field'
        - type: object
          required:
            - fieldname
            - value
          properties: 
            fieldname:
              type: string
              example: 'identifier.type'
              enum: ['identifier.type']
            value: 
              type: string
              example: "NATIONAL_ID"
              enum: ['NATIONAL_ID','FARMER_ID']
    IdentifierValueField:
      description: 'Search with identifier value'
      allOf: 
        - $ref: '#/components/schemas/Field'
        - type: object
          required:
            - fieldname
            - value
          properties: 
            fieldname:
              type: string
              example: 'identifier.value'
              enum: ['identifier.value']
            value: 
              type: string
              example: "345678912"
              description: 'Any string that contains identifier, for example for identifier.type NATIONAL_ID value may be 345678912'
    NameField:
      description: 'Search with first name, HumanName is response object so fields of HumanName to be sent in search'
      allOf: 
        - $ref: '#/components/schemas/Field'
        - type: object
          required:
            - fieldname
            - value
          properties: 
            fieldname:
              type: string
              example: 'name.first_name'
              enum: ['name.first_name','name.last_name']
            value: 
              type: string
              example: "John"
              description: 'Search by first name or last name of human'
    CropTypeField:
      description: 'Search by crop type'    
      allOf: 
        - $ref: '#/components/schemas/Field'
        - type: object
          required:
            - fieldname
            - value
          properties: 
            fieldname:
              type: string
              example: 'croptype'
              enum: ['croptype']
            value: 
              type: string
              example: "kharif"
              enum: ['kharif','rabi','zaid']
              description: 'Search by crop type'
    RegionField:
      description: 'Search by region'        
      allOf: 
        - $ref: '#/components/schemas/Field'
        - type: object
          required:
            - fieldname
            - value
          properties: 
            fieldname:
              type: string
              example: 'region'
              enum: ['location']
            value: 
              type: string
              example: "SE- India"
              enum: ['SE- India','WEST - INDIA']
              description: 'Search by location'
    FarmerTypeField:
      allOf: 
        - $ref: '#/components/schemas/Field'
        - type: object
          required:
            - fieldname
            - value
          properties: 
            fieldname:
              type: string
              example: 'farmertype'
              enum: ['farmertype']
            value: 
              type: string
              example: "marginal"
              enum: ['owner','marginal']
              description: 'Search by farmer type'
    Repositories:
      allOf: 
        - $ref: '#/components/schemas/Field'
        - type: object
          required:
            - fieldname
            - value
          properties: 
            fieldname:
              type: string
              example: 'repository_type'
              enum: ['repository_type']
            value: 
              type: string
              example: "marginal"
              enum: ['Birth', 'Death', 'Marriage']
              description: 'Search by farmer type'
    FieldOperator:
      type: string
      enum:
        - or
        - and
        - contains
        - like
    GroupOperator:
      type: string
      enum:
        - or
        - and
    Sort:
      type: object
      properties:
        fieldname:
          type: string
          enum: [firstname,dob]
        order:
          type: string
          enum: ["asc","desc"]

    ApiResponse:
      type: object
      properties:
        success:
          type: string
        return_message:
          type: string
        error_code:
          type: string
        transaction_id:
          type: string
          example: 0c96614c-7255-4774-b109-cd53ee859000
          description: The transaction_id received in request
        data: 
          type: array
          items:
            $ref: '#/components/schemas/FarmerInfo'
    HumanName:
      type: object
      properties:
        suffix:
          type: string
          example: PhD
        prefix:
          type: string
          example: Mr.
        first_name:
          type: string
          example: john
        middle_name:
          type: string
          example: doe
        last_name:
          type: string
          example: doe
    Address:
      type: object
      properties:
        city:
          type: string
        state:
          type: string
        country:
          type: string
    Contact:
      type: object
      properties:
        email:
          type: string
        phone:
          type: string
    Proof:
      type: object
      properties:
        type:
          type: string
          example: 'Ed25519Signature2018'        
        created:
          type: string
          example: '2023-05-09T12:34:56Z'      
        verificationMethod:
          type: string
          example: 'did:example:123#key-1'        
        proofPurpose:
          type: string
          example: 'assertionMethod'       
        jws:
          type: string
          example: 'eyJhbGciOiJFZDI1NTE5U2lnbmF0dXJlMjAxOCIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..iHCBYnF2ovIe9hjaaxEC25N-2P8w4Qtf9zQBUV-zXnLHfYqzzubpI8f0mvmXdD6rvYB-9Zx_bFdK46e1IcblDA'        
    FarmerInfo:
      type: object
      properties:
        identifier:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Identifier'
              - $ref: '#/components/schemas/Identifier'
        name:
          $ref: '#/components/schemas/HumanName'
        location:
          type: string
        crop_type:
          type: string
          enum: ['Food Crops','Feed Crops','Fiber Crops','Oil Crops','Ornamental Crops','Industrial Crops']
        farmer_type:
          type: string
          enum: ['Marginal','Small','Medium','Large','Sharecropper','Tenant','Owner','landless']
        landsize:
          type: string
        contactno:
          type: string
    IsFarmerEligibility:
      type: object
      properties:
        eligibility_check_id:
          type: string
          format: string
        eligibility_check_type:
          type: string
          description: claim type 
          example: IS_A_FARMER
          enum: ['IS_A_FARMER']
        response_format:
          type: string
          enum: ['json']
    SupportedEvents:
      type: object
      properties:
        eventlist:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/FarmerRegistrationEvent'
    PovertyScoreEligibility:
      type: object
      properties:
        eligibility_check_id:
          type: string
          format: string
        eligibility_check_type:
          type: string
          description: Poverty score check 
          example: POVERTY_SCORE
          enum: ['POVERTY_SCORE']
        response_format:
          type: string
          enum: ['json']
    UnSubscribeRequest:
      type: object
      properties:
        event_code:
          type: string
          enum: ['DISABLE_PERSON_REGISTRATION']
          description: 'To subscribe this event send this code in subscription request'
        client_id:
          type: string
        reason:
          type: string    
    FarmerRegistrationEvent:
      type: object
      properties:
        event_code:
          type: string
          enum: ['FARMER_REGISTRATION']
          description: 'To subscribe this event send this code in subscription request'
        response_format:
          type: string
          enum: ['json']
        response_sample:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/FarmerInfo'
    SubscriptionRequest:
      type: object
      properties:
        event_code:
          type: string
          enum: ['FARMER_REGISTRATION']
          description: 'To subscribe this event send this code in subscription request'
        client_id:
          type: string
        callback_url:
          type: string
    SubscriptionResponse:
      type: object
      properties:
        success:
          type: string
        return_message:
          type: string
        error_code:
          type: string
        subscribed_events:
          type: string
          example: 0c96614c-7255-4774-b109-cd53ee859000
          description: The transaction_id received in request
        data: 
          type: array
          items:
            $ref: '#/components/schemas/SubscriptionRequest'
    EligibilityDeterminationRequest:
      type: object
      properties:
        payload:
          type: array
          items:
            anyOf:
              - $ref: '#/components/schemas/VerifiableCredentialIsFarmer'
              - $ref: '#/components/schemas/VerifiableCredentialPovertyScore'
    VerifiableCredentialIsFarmer:
      type: object
      properties:
        context:
          type: array
          example: ['https://www.w3.org/2018/credentials/v1','https://w3id.org/citizenship/v1','https://example.com/farmers/v1']
          items:
            type: string
            enum: ['https://www.w3.org/2018/credentials/v1','https://w3id.org/citizenship/v1','https://example.com/farmers/v1']
        type:
          type: array
          example: ['VerifiableCredential','FarmerCredential']
          items:
            type: string
            items:
              type: string
            example: ["VerifiableCredential", "FarmerCredential"]                 
        determine:
          $ref : '#/components/schemas/IsFarmerEligibility'
        issuer: 
          type: string
          example: 'did:farmer-registry:345678912'
        issuanceDate:
          type: string
        expirationDate:
          type: string
        credentialSubject:
          $ref: '#/components/schemas/CredentialSubject'
        proof:
          $ref: '#/components/schemas/Proof'
    VerifiableCredentialPovertyScore:
      type: object
      properties:
        context:
          type: array
          example: ['https://www.w3.org/2018/credentials/v1','https://w3id.org/citizenship/v1','https://example.com/farmers/v1']
          items:
            type: string
            enum: ['https://www.w3.org/2018/credentials/v1','https://w3id.org/citizenship/v1','https://example.com/farmers/v1']
        type:
          type: array
          example: ['VerifiableCredential','FarmerPovertyScoreCredential']
          items:
            type: string
            items:
              type: string
            example: ["VerifiableCredential", "FarmerPovertyScoreCredential"]                 
        determine:
          $ref : '#/components/schemas/PovertyScoreEligibility'
        issuer: 
          type: string
          example: 'did:farmer-registry:345678912'
        issuanceDate:
          type: string
        expirationDate:
          type: string
        credentialSubject:
          $ref: '#/components/schemas/CredentialSubject'
        proof:
          $ref: '#/components/schemas/Proof'
    CredentialSubject:
      type: object
      properties:
        identifier:
          $ref: '#/components/schemas/Identifier'
        id:
          type: string
        person:
          $ref: '#/components/schemas/HumanName'
        address:
          $ref: '#/components/schemas/Address'
        contact:
          $ref: '#/components/schemas/Contact' 
    EligibilityDeterminationResponse:
      type: object
      properties:
        verifiableCredential:
          type: array
          items:
            anyOf:
              - $ref : '#/components/schemas/VerifiableCredentialIsFarmerResponse'
              - $ref : '#/components/schemas/VerifiableCredentialPovertyScoreResponse'
    VerifiableCredentialIsFarmerResponse:
      type: object
      properties:
        id:
          type: string
          example: 'https://registry-host/isfarmer/NATIONAL_ID/345678912'
        issuer:
          type: string
          example: 'https://registry-host.com'
        issuanceDate:
          type: string
          example: '2022-05-09T10:11:12Z'          
        credentialSubject:
            $ref : '#/components/schemas/CredentialSubject'
        is_farmer:
          type: boolean
          example: true
    VerifiableCredentialPovertyScoreResponse:
      type: object
      properties:
        id:
          type: string
          example: 'https://registry-host/isfarmer/NATIONAL_ID/345678912'
        issuer:
          type: string
          example: 'https://registry-host.com'
        issuanceDate:
          type: string
          example: '2022-05-09T10:11:12Z'          
        credentialSubject:
            $ref : '#/components/schemas/CredentialSubject'
        poverty_score:
          type: boolean
          example: '70%'
    EventsRequest:
      type: object
      properties:
        event_code:
          type: string
          enum: ['FARMER_REGISTRATION']
          description: 'To subscribe this event send this code in subscription request'
        client_id:
          type: string
        start_date:
          type: string
          description: 'Date from which events to retrieve'
        end_date:
          type: string        
          description: 'Date upto which events to retrieve'
    EventsResponse:
      type: object
      properties:
        eventlist:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/FarmerRegistrationEvent'    
    Identifier:
      type: object
      properties:
        type:
          type: string
          enum: ['NATIONAL_ID','FARMER_REG_NO']
        value:
          type: string
          example: 345678912
    HttpErrorResponse:
      description: HTTP layer error details
      properties:
        error_code:
          type: string
        error_message:
          type: string
    
    ValidationCheckRequest:
      type: object
      description: '' 
      properties:
        validation_code:
          type: array
          items:
            type: string
          example: ["IS_FARMER", "IS_POOR", "IS_SENIOR_CITIZEN"]
          description: 'Is given id valid in farmer registry, This will check in farmer registry for supplied information of ID'
        identifier:
          $ref: '#/components/schemas/Identifier'
    ValidationCheckResponse:
      type: object
      description: '' 
      properties:
        validations:
          type: array
          items:
            anyOf:
              - $ref: '#/components/schemas/ValidationResponse'
        identifier:
          $ref: '#/components/schemas/Identifier'
    ValidationResponse:
      type: object
      description: '' 
      properties:
        validation_code:
          type: string
          enum: ['IS_SENIOR_CITIZEN']
          example: 'IS_SENIOR_CITIZEN'
        response:
          type: boolean
          enum: [true,false]
          description: 'This flag will indicate outcome of validation check'
    
  securitySchemes:
    spmis_auth:            # arbitrary name for the security scheme
      type: http
      scheme: bearer
      bearerFormat: JWT

#    spmis_auth:
#      type: http
#      scheme: bearer
#      bearerFormat: jwt
#      flows:
#        implicit:
#          authorizationUrl: https://localhost:8081/oauth/authorize
#          scopes:
#            read:search: Allowed to perform search operation
#            read:claims: Read list of claims